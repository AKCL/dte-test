!function(e){e.fn.randomize=function(n,t){return this.each(function(){var a=e(this);n&&(a=e(this).find(n));var r=a.children(t),o=r.clone();o.sort(function(){return Math.round(Math.random())-.5});for(var c=0;c<o.length;c++)r.eq(c).replaceWith(o[c])})}}(jQuery),$(document).ready(function(){function e(){r=$(".box"),$(".fancybox").fancybox({maxWidth:400,closeClick:!0,afterLoad:function(){this.content="<p>"+$(this.element).data("response")+"</p>",this.content+='<p class="back">Back to Quiz</p>'}})}function n(){i.show(),$(".backstretch").fadeOut(100),r.fadeOut(100),s>c?($.backstretch("img/"+d[c]),$(".backstretch").fadeIn("fast"),r.eq(c).randomize(".question .answers","a").delay(200).fadeIn(100),$("html,body").delay(500).animate({scrollTop:0},"slow"),c++):(c=0,r.fadeOut(100),i.hide(),u.delay(500).fadeIn(500))}function t(){console.log("wrong")}function a(e){""==e?n():t(e)}var r,o,c,s,i=$(".quiz-container"),l=$(".start-container"),u=$(".end-container"),d=($(" a.start"),[]);$.backstretch("img/"+d[c]);var f=$("#start-template").html(),p=Handlebars.compile(f),h=$("#question-template").html(),m=Handlebars.compile(h),b=$("#end-template").html(),g=Handlebars.compile(b);Handlebars.registerHelper("format",function(e){return e=Handlebars.Utils.escapeExpression(e),e=e.replace(/(\n|\n)/gm,"<br>"),e=e.replace(/(\r|\r)/gm,"<p>"),new Handlebars.SafeString(e)}),Handlebars.registerHelper("math",function(e,n,t){return e=parseFloat(e),t=parseFloat(t),{"+":e+t,"-":e-t,"*":e*t,"/":e/t,"%":e%t}[n]}),$(document).on("click",".start",function(e){e.preventDefault(),l.fadeOut(100),n()}),$(document).on("click",".restart",function(e){e.preventDefault(),u.fadeOut(100),l.fadeIn(100),i.show()}),$(document).on("click",".answers a",function(e){e.preventDefault(),a($(this).data("response"))}),$.getJSON("quiz.js?nocache="+(new Date).getTime(),function(n){$.each(n.questions,function(e,n){d.push(n.background)}),o=n,$("body").css({"background-image":"url(img/"+o.start[0].background+")","background-repeat":"no-repeat","background-size":"cover"}),s=_.size(o.questions),console.log(s),c=0,l.append(p(o)),_.defer(e),i.append(m(o)),u.append(g(o))})});